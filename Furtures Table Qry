Tables:
Default Futures Table from csv file deltaexchange

1. Futures:
CREATE TABLE 'futures' ( 	product_symbol VARCHAR,	price DOUBLE, 	size DOUBLE,  	timestamp VARCHAR, 	buyer_role VARCHAR )WITH maxUncommittedRows=500000, o3MaxLag=600000000us;

2. Modified Table with timestamp varchar converted to timestamp. and added day partiton

CREATE TABLE 'furures_BTCUSD_2022' ( 	product_symbol SYMBOL CAPACITY 8 CACHE, price DOUBLE,  	size DOUBLE,	timestamp TIMESTAMP ) TIMESTAMP(timestamp) PARTITION BY DAY WAL WITH maxUncommittedRows=500000, o3MaxLag=600000000us

OR

3. Create Materialised View 

SELECT     product_symbol,    timestamp_floor('5m', timestamp) AS datetime,    first(price) AS open,    max(price) AS high,    min(price) AS low,    last(price) AS close,    sum(size) AS volume,    round(avg(price), 2) AS avg_price
FROM futures_BTCUSD_2022 WHERE timestamp IS NOT NULL

